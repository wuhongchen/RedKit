# 小红书笔记内容&评论下载器 (XHS-Downloader)

## 项目概述

**项目名称**：小红书笔记内容&评论下载器 (XHS-Downloader)

**一句话描述**：一个基于油猴脚本的小红书网页端数据提取、评论爬取、素材打包与**多场景自动化采集**工具。

**目标**：为运营人员提供高效、轻量的数据采集手段，支持笔记详情、全量评论导出、高清素材一键打包，以及**搜索/主页/用户页笔记列表的批量自动化处理**。

## 目标用户

**核心用户群体**：自媒体运营人员、内容创作者、爆款研究员。

**用户特征**：
- **技术水平**：初中级，熟悉浏览器扩展，需要直接可用的结构化数据（CSV/ZIP）。
- **痛点**：网页端无法直接下载视频/图片；长篇评论难以完整复制；不同笔记的数据整理耗时耗力。

## 核心功能

### 功能 1：浮动下载控制面板
**功能描述**：在小红书详情页右下角显示一个常驻浮动按钮，悬停后展开功能菜单，支持一键触发各项提取任务。
**优先级**：高（已实现）
**业务规则**：
- 仅在笔记详情页激活。
- 包含核心操作：提取笔记、提取评论、导出 CSV、下载素材（详情页）；提取列表、**自动化批量采集**（列表页）。

### 功能 2：笔记内容提取
**功能描述**：解析当前笔记的 DOM 结构，提取核心文本及元数据。
**输出字段**：
- 基础信息：笔记 ID、标题、正文、标签、作者名称。
- 互动数据：点赞数、收藏数、评论数。
- 附属属性：发布日期、IP 属地、原文链接。
**优先级**：高（已实现）

### 功能 3：评论全量爬取
**功能描述**：通过自动模拟滚动和层级解析，批量提取该笔记下的所有评论。
**技术细节**：支持主评论与子评论（回复）的关联提取，包含用户名、内容、日期、点赞数。
**优先级**：高（已实现）

### 功能 4：媒体素材打包下载 (ZIP)
**功能描述**：识别笔记中的所有高清图片及视频，调用 JSZip 库进行前端实时打包，生成 ZIP 压缩包。
**核心价值**：自动规避小红书图片压缩，提取最高分辨率素材，且支持视频原文件下载。
**优先级**：高（已实现）

### 功能 5：CSV 结构化导出
**功能描述**：将已提取的笔记信息与评论数据合并，导出为带 BOM 的 UTF-8 CSV 文件，确保 Excel 兼容。
**格式定义**：
- 分为“笔记信息区”、“评论明细区”和“**批量采集/搜索结果列表区**”。
- 支持子评论缩进标识。
- **支持自动化批量采集后的全维度数据汇总导出。**
**优先级**：高（已实现）

### 功能 6：多场景列表抓取 (搜索/主页/用户)
**功能描述**：支持在关键词搜索结果页、用户个人主页、系统推荐首页等列表场景，一键抓取所有展示笔记的元数据。
**输出字段**：笔记 ID、标题、作者名称、点赞数、笔记原链接。
**优先级**：高（已实现）

### 功能 7：自动化逐个提取 (循环穿透)
**功能描述**：在列表页触发后，脚本自动模拟点击进入每一个笔记详情，执行内容与评论提取，完成后自动返回列表并跳转至下一个笔记。
**核心价值**：极大减少人工操作，实现真正意义上的半自动批量采集。
**技术挑战**：需要处理 SPA 路由返回、异步加载等待及操作限频。
**优先级**：高（已实现）

---

## 项目路线图 (Future Roadmap)

### 自动化与曝光 (indai.js)
- **自动互动**：整合 `indai.js` 中的自动点赞、收藏功能，提升账号曝光。
- **批量搜索抓取**：支持在搜索结果页进行多页面自动翻页采集。

## 技术栈

- **脚本引擎**：Tampermonkey (油猴) 4.0+
- **核心逻辑**：原生 JavaScript (Vanilla JS)
- **资源下载**：`GM_xmlhttpRequest` (解决跨域下载问题)
- **文件处理**：JSZip (多文件打包压缩)
- **样式方案**：Scoped CSS (避免污染原站样式)

---

**文档版本**：v1.4.0
**最后更新**：2026-02-15
